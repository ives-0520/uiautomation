{"name": "test_recharge_flow[0609@ipwangxin.cn-123456-0032585037122898]", "status": "failed", "statusDetails": {"message": "AssertionError: 充值流程断言失败，未检测到充值成功的标志性元素\nassert '\\u5145\\u503c\\u7ed3\\u679c: \\u6210\\u529f' in '\\u5931\\u8d25\\uff0c\\u5931\\u8d25\\u539f\\u56e0\\u662f\\u5145\\u503c\\u5361\\u65e0\\u6548\\uff080031:Invalid Recharge Card.\\uff09\\u3002'", "trace": "app_init = (<uiautomator2.Device object at 0x00000145409A0050>, <device.device_init.appOpt object at 0x0000014558E9F500>, <config...ct at 0x0000014558E56E70>, <element_manage.element_locator_manager.ElementLocatorManager object at 0x0000014558E9FB00>)\nusername = '0609@ipwangxin.cn', password = '123456', code = '0032585037122898'\n\n    @allure.story(\"充值功能\")\n    @pytest.mark.parametrize(\"username, password, code\", recharge_test_data)\n    def test_recharge_flow(app_init, username, password, code):\n        device = app_init[0]\n        app = app_init[1]\n        app.startApp()\n        time.sleep(3)\n        manager = app_init[3]\n        # 登录\n        login_obj = obj_login(device, manager)\n        login_obj.login(username, password)\n        app.click_(app.manager.get_locator(\"imageView\").locator )\n    \n        # 充值\n        recharge_obj = obj_recharge(device, manager)\n        recharge_obj.recharge_flow(code)\n        time.sleep(2.5)  # 等待充值流程完成\n        # 充值后截图保存\n        case_dir = os.path.dirname(os.path.abspath(__file__))\n        screenshot_dir = os.path.join(case_dir, \"images\")\n        os.makedirs(screenshot_dir, exist_ok=True)\n        screenshot_path = os.path.join(\n            screenshot_dir, f\"screenshot_recharge_{time.strftime('%Y%m%d_%H%M%S')}.png\"\n        )\n        screenshot_dir = os.path.join(os.getcwd(), \"screenshots\")\n        device.screenshot(screenshot_path)\n        allure.attach.file(screenshot_path, name=\"充值后截图\", attachment_type=allure.attachment_type.PNG)\n        # 断言：检查页面是否有充值成功后的元素（如头像或其他标志性元素）\n        # assert recharge_obj.is_el_exists(recharge_obj.manager.get_locator(\"imageView\").locator), \"断言失败\"\n        locator = ImageAI()\n        assert_result=locator.ai_assert(screenshot_path, \"判断是否充值成功，并返回判断结果成功或失败，若失败，附上失败原因\")\n        logging.info(f\"充值结果: {assert_result}\")\n>       assert \"充值结果: 成功\" in assert_result, \"充值流程断言失败，未检测到充值成功的标志性元素\"\nE       AssertionError: 充值流程断言失败，未检测到充值成功的标志性元素\nE       assert '\\u5145\\u503c\\u7ed3\\u679c: \\u6210\\u529f' in '\\u5931\\u8d25\\uff0c\\u5931\\u8d25\\u539f\\u56e0\\u662f\\u5145\\u503c\\u5361\\u65e0\\u6548\\uff080031:Invalid Recharge Card.\\uff09\\u3002'\n\ntestCase\\testApp\\recharge\\test_obj_recharge.py:48: AssertionError"}, "attachments": [{"name": "充值后截图", "source": "91ed034f-b6ee-4a7b-83db-3b4b2ff5e288-attachment.png", "type": "image/png"}, {"name": "AI日志分析建议_test_recharge_flow[0609@ipwangxin.cn-123456-0032585037122898]", "source": "3841cbe5-1245-49f9-a871-1932f4695421-attachment.txt", "type": "text/plain"}, {"name": "用例执行失败截图_test_recharge_flow[0609@ipwangxin.cn-123456-0032585037122898]", "source": "9932a01b-cf8d-448f-bac0-8a5502931504-attachment.png", "type": "image/png"}, {"name": "logcat_test_recharge_flow[0609@ipwangxin.cn-123456-0032585037122898]", "source": "b30ab12b-9979-4784-913b-1a7c8df3c8bb-attachment.txt", "type": "text/plain"}, {"name": "log", "source": "1edc2e9e-bb43-4777-96da-243bbfa21b23-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "username", "value": "'0609@ipwangxin.cn'"}, {"name": "password", "value": "'123456'"}, {"name": "code", "value": "'0032585037122898'"}], "start": 1750354180515, "stop": 1750354212283, "uuid": "e5385847-c2aa-4121-835f-a85a59893301", "historyId": "bc58c067ef11f95915ef5f0f5f5822b8", "testCaseId": "2604d966f28ef34bcba680e3571a2b39", "fullName": "testCase.testApp.recharge.test_obj_recharge#test_recharge_flow", "labels": [{"name": "story", "value": "充值功能"}, {"name": "parentSuite", "value": "testCase.testApp.recharge"}, {"name": "suite", "value": "test_obj_recharge"}, {"name": "host", "value": "Ives-win10"}, {"name": "thread", "value": "18580-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testCase.testApp.recharge.test_obj_recharge"}]}